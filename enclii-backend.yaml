name: qubic-backend
type: web

build:
  dockerfile: Dockerfile
  context: .

deploy:
  replicas: 2
  resources:
    memory:
      min: 1Gi
      max: 2Gi

service:
  port: 5000
  healthCheck:
    path: /api/health
    intervalSeconds: 30
    timeoutSeconds: 10

domains:
  - domain: api.qubic.quest
    tls:
      provider: cloudflare

env:
  - key: CORS_ORIGINS
    value: "https://qubic.quest"
  - key: JANUA_ISSUER
    secret: janua_issuer
  - key: JANUA_AUDIENCE
    secret: janua_audience

autoDeploy:
  branch: main
