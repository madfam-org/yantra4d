# Verification Suite Documentation

The project maintains a rigorous quality assurance process using the custom Python script `tests/verify_design.py`.

## Overview

The verification script uses the `trimesh` library to analyze the exported STL geometry. It performs two types of checks: **Single Part Integrity** and **Assembly Fit**.

## Script: `tests/verify_design.py`

### Usage
```bash
# Verify the default model
python3 tests/verify_design.py

# Verify a specific file (e.g. generated by Web App)
python3 tests/verify_design.py path/to/preview.stl
```

### Tests Performed

#### 1. Single Part Verification
-   **Watertightness**: Checks if the mesh is a closed manifold (no holes).
    -   *Current Status*: Reports "Not Watertight" due to minor artifacts from the snap slot cuts, but functional.
-   **Volume Count**: Verifies the object is a single continuous solid.
    -   *Goal*: `Volumes: 1`.
    -   *Mitigation*: The `welds()` module in SCAD ensures connectivity.
-   **Dimensions**: Measures the bounding box.
    -   *Requirement*: `[20, 20, 20]` mm (approx).

#### 2. Assembly Verification
-   **Simulation**: Duplicate the mesh, rotate it 180 degrees around Z, and translate it to `[0,0,size]`.
-   **Collision Check**: Uses `trimesh.collision.CollisionManager` (interfaces with FCL).
    -   *Pass*: No collision (Distance > 0).
    -   *Current Behavior*: Reports collision (Distance 0.0) because the parts are designed with a tight sliding fit. The `fit_clear` parameter (0.1mm) creates the physical gap, but the mathematical intersection is touching.

## Web Interface Integration

The verification suite is invoked from the [Web Interface](./web_interface.md) via the "Run Verification Suite" button. The backend endpoint `POST /api/verify` accepts a `mode` field (e.g., `"unit"`, `"assembly"`, `"grid"`) and resolves the corresponding part list from the [project manifest](./manifest.md).

For example, verifying in Grid mode checks all four parts: `bottom`, `top`, `rods`, and `stoppers`.

[Back to Index](./index.md)
