# Yantra4D Platform Roadmap

> **Last updated**: 2026-02-18
> **Strategy**: Reach platform stability first (P0 ‚Üí P1), then expand the Hyperobjects Commons with new projects.

---

## Stability First: P0 & P1 Priorities

Before expanding with new features or new hyperobject projects, the platform must be stable, well-tested, and fully documented. The following items are prerequisites to any Phase 3 or new-project work.

---

### P0 ‚Äî Critical (Blockers)

These gaps represent risks to production quality and must be resolved before any new feature work.

#### P0.1 ‚Äî Wire E2E Tests into CI

**Problem**: 18 Playwright E2E test suites exist across `apps/studio/e2e/tests/` but are **not included in the CI pipeline** (`.github/workflows/ci.yml`). A regression in any of the 18 tested flows (navigation, rendering, export, auth, accessibility, i18n, etc.) could ship to production undetected.

**Fix**: Add a `e2e` job to `ci.yml` that runs `npx playwright test` against a built studio + running API. Use Playwright's built-in HTML reporter for CI artifacts.

**Effort**: Small ‚Äî 1‚Äì2 hours of CI config work.

---

#### P0.2 ‚Äî Resolve Stub Projects

**Status**: ‚úÖ **Complete**

- `tablaco` was the only truly empty directory. It is now wired as a git submodule from [`madfam-org/tablaco`](https://github.com/madfam-org/tablaco) at `projects/tablaco/vendor/tablaco`, with a root `project.json` that prefixes SCAD paths with `vendor/tablaco/`.
- All other previously-stub projects (`din-rail-clip`, `faircap-filter`, `glia-diagnostic`, `parametric-connector`, `prosthetic-socket`, `soft-jaw`) already had `project.json` and SCAD files ‚Äî they only needed `estimate_constants` and schema fixes.
- All 28 active projects now pass `scripts/validate_manifests.py`. ‚ú®

---

### P1 ‚Äî High Priority (Pre-Expansion)

These items improve platform quality and completeness before the next round of feature or project work.

#### P1.1 ‚Äî Complete Project Gallery

**Status**: ‚úÖ **Complete**

All 28 active projects now have `thumbnail`, `tags`, and `difficulty` fields. `glia-diagnostic` was the last project missing these ‚Äî added as part of the P0.2 schema cleanup pass.

---

#### P1.2 ‚Äî Per-Project Documentation

**Status**: ‚úÖ **Complete**

All 28 active projects now have `docs/README.md`, auto-generated by `scripts/generate-project-docs.py`. `framing-hyperobject` has a hand-written `docs/README.md` describing the research document and planned CDG interfaces.

---

#### P1.3 ‚Äî WASM Fallback Testing

**Status**: ‚úÖ **Complete**

`apps/studio/e2e/tests/19-wasm-fallback/wasm-fallback.spec.js` added. Tests intercept the `/api/health` route to simulate backend unavailability, then verify the studio loads without crashing, shows no backend error messages, and keeps the generate button enabled.

---

#### P1.4 ‚Äî Rate Limiter Backend (Redis)

**Status**: ‚úÖ **Already complete**

`docker-compose.yml` already has a Redis service, and `apps/api/extensions.py` already reads `RATE_LIMIT_STORAGE` env var (falls back to `REDIS_URL`, then `memory://`). No work needed.

---

#### P1.5 ‚Äî Hyperobjects Commons Phase 2 (UI)

**Status**: ‚úÖ **Already complete**

- **Landing**: `CDGSection.astro` exists with full CDG catalog, domain filter, and hyperobject badges on project cards.
- **Studio**: `StudioHeader.jsx` shows a hyperobject domain badge when `manifest.project.hyperobject.is_hyperobject` is true.

---

## Phase 3 ‚Äî Platform Expansion (Post-Stability)

The following features expand the platform's capabilities. They should be tackled after P0 and P1 are resolved.

---

### 3.1 ‚Äî Product Configurator Storefront Mode

**Goal**: Turn Yantra4D into a micro-SaaS for 3D-printed product businesses.

**Combines existing features**:
- `access_control` (manifest schema already supports tiers: public/free/pro/admin)
- Shareable URLs (`useShareableUrl.js` ‚Äî base64url param encoding)
- BOM with supplier links
- Materials and print estimation
- Assembly steps

**New work required**:
- "Customer view" layout that hides developer UI (parameter groups, SCAD info)
- Datasheet PDF generation from manifest + rendered STL thumbnail
- Storefront landing page per project (public URL, product description, preset gallery)
- Optional Stripe/payment integration for premium configurations

**Why it matters**: A user configures a motor mount, sees the NEMA 17 in preview, gets a build guide PDF with purchase links, and shares a URL. That workflow doesn't exist in any web-based parametric tool today.

---

### 3.2 ‚Äî BOSL2 Attachment-Aware Auto-Assembly

**Goal**: Automatically generate `assembly_steps` from BOSL2 `attach()` / `position()` calls in SCAD source.

**Implementation path**:
1. Extend `scad_analyzer.py` to parse `attach()`, `position()`, and `orient()` calls
2. Build a dependency graph of part-to-part connections
3. Topological sort ‚Üí ordered assembly sequence
4. Infer camera positions from attachment coordinates
5. Write generated `assembly_steps` into project manifest

**Why it matters**: Manual assembly authoring is the highest-friction part of creating a complete manifest. Auto-generation from BOSL2 attachment semantics removes that barrier for library-aware projects.

---

### 3.3 ‚Äî NopSCADlib Component Catalog Widget

**Goal**: Visual hardware selector that auto-adjusts parametric geometry.

**Manifest declaration**:
```json
{
  "widget": {
    "type": "component-picker",
    "catalog": "nopscadlib/bearings"
  }
}
```

**Implementation path**:
1. Parse NopSCADlib catalog metadata (dimensions, specs, supplier URLs)
2. New widget type in `Controls.jsx`: visual grid of hardware components
3. Selection updates dependent parameters (bore diameter, mounting holes, etc.)
4. Preview shows selected component via `static_stl` reference geometry

**Why it matters**: Bridges the gap between parametric design and real hardware selection. Users pick a bearing from a visual catalog and the mount auto-adjusts.

---

### 3.4 ‚Äî MCAD to BOSL2 Gear Migration

**Goal**: Replace MCAD `involute_gears` with BOSL2 `gears.scad` across existing projects.

**BOSL2 advantages over MCAD**:
- Bevel gears, worm gears, rack-and-pinion (MCAD only has spur/involute)
- `spur_gear()` with built-in shaft bore, pressure angle, helical angle
- `gear_dist()` for accurate center distance calculation
- Active maintenance (MCAD is effectively unmaintained)

**Migration steps**:
1. Identify all projects using `use <MCAD/involute_gears.scad>`
2. Map MCAD API calls to BOSL2 equivalents
3. Update SCAD files and verify geometry output matches
4. Update manifests if parameter names change

**Risk**: Low ‚Äî BOSL2 is already a submodule in `libs/`. The `gear-reducer` project already demonstrates the BOSL2 gear API.

---

### 3.5 ‚Äî Hyperobjects Commons Rollout (Phase 3)

**Goal**: Transform designated projects into standardized Hyperobjects with CDG interfaces, enforcing strict architectural and licensing standards.

**Hyperobject Standards**:
Any project designated as a "Hyperobject" and part of the Commons must adhere to the following strict requirements:
1.  **Complete Rewrite**: Logic must be rewritten from scratch to ensure cleanliness and modern standards.
2.  **BOSL2 & OEP8**: All geometry must leverage `BOSL2` and follow `OEP8` formatting/structure standards.
3.  **No External Vendors**: Start fresh without `vendors/` or 3rd-party repositories.
4.  **Repository Extraction**: The final result must be extracted into its own repository under the `madfam-org` organization.
5.  **CERN OHL License**: The new repository must be licensed under `CERN-OHL-S-2.0`.

**Planned Rollout candidates**:
- `gridfinity` ‚Äî household domain, `grid` + `snap` interfaces
- `stemfie` ‚Äî education domain, `bolt_pattern` + `profile` interfaces
- `fasteners` ‚Äî industrial domain, `thread` + `bolt_pattern` interfaces
- `gears` ‚Äî mechanical domain, `profile` interfaces
- `motor-mount` ‚Äî industrial domain, `bolt_pattern` interfaces

**Why it matters**: Transforms parametric projects from isolated designs into interoperable components in a distributed manufacturing commons. CDG interfaces enable communities to build compatible ecosystems of printable objects.

---

### 3.6 ‚Äî Technical Health & Engineering

**Goal**: Address technical debt and optimize platform performance alongside feature development.

**Key Initiatives**:
*   **SCAD Optimization**: Refactor core project geometry (e.g., `gridfinity`) to reduce duplication and improve render times (addressing existing `TODO`s).
*   **WASM Performance**: Investigate and implement memory optimizations for client-side rendering to handle complex models more robustly.
*   **Render Pipeline Robustness**: Optimize the Docker rendering pipeline to better handle exponentially complex parameter sets without timing out.

---

## Phase 4 ‚Äî New Hyperobject Projects (Post-Stability)

New SCAD projects to be designed and classified as Hyperobjects from the ground up. These are prioritized **after** platform stability (P0 + P1) is achieved.

---

### 4.1 ‚Äî `framing-hyperobject` ‚Äî The Containing Frames Hyperobject

**Status**: üî¨ Research complete ‚Äî SCAD project not yet started

**Research**: [`projects/framing-hyperobject/FramingHyperobjectResearchandTaxonomy.html`](../projects/framing-hyperobject/FramingHyperobjectResearchandTaxonomy.html)
*"The Morphology of Containment: A Technical and Ontological Analysis of the Framing Hyperobject"*

**Concept**: The totality of framing systems ‚Äî from gilded museum mouldings to sonic-welded trading card slabs, from SEG lightbox extrusions to VESA monitor mounts ‚Äî constitutes a massive, distributed infrastructure of containment. This hyperobject is governed by rigorous, often invisible, standards of metrology, material physics, and industrial tolerance.

**Research covers** (10 sections, 70+ citations):
- Traditional picture frames: rabbet geometry, moulding profiles (bevel, scoop, ovolo, ogee/cyma, floater), archival hierarchy (museum ‚Üí conservation ‚Üí budget)
- Canvas tension systems: stretcher bar keying, gallery/museum wrap depths, Silicone Edge Graphics (SEG) with keder/channel tolerances
- Industrial snap frames: spring-steel mechanism, 25mm/32mm profile standards, visual bite (10‚Äì12mm)
- LED lightboxes: edge-lit vs. ladder-light, depth vs. diffusion tradeoffs (18mm‚Äì160mm)
- Collectible slabs: PSA/BGS/SGC/CGC/TAG dimensional standards and incompatibility analysis
- Numismatic capsules: direct-fit (sub-0.1mm tolerance) and ring-fit systems
- Comic book preservation: Golden/Silver/Modern age bag standards, CGC slab inner-well gasket
- Wearable frames (ID badges): CR80/ISO 7810 standard, slot punch geometry (1/8" √ó 9/16"), lanyard hardware
- Parametric digital frames: OpenSCAD + BOSL2 `path_sweep()` / `bezier_sweep()` for ogee profiles, FDM friction-fit tolerances (0.15‚Äì0.25mm clearance)
- Mounting systems: VESA MIS-D/E/F patterns, French cleat load distribution, standoff barrel dimensions

**Proposed CDG interfaces**:
| Interface ID | Geometry Type | Description |
|---|---|---|
| `rabbet` | `pocket` | L-shaped recess for art stack containment |
| `seg_channel` | `socket` | 3mm √ó 12mm keder channel for fabric graphics |
| `snap_profile` | `snap` | Spring-loaded 25mm/32mm snap frame profile |
| `vesa_pattern` | `bolt_pattern` | 75√ó75 / 100√ó100 / 200√ó200 / 400√ó400 mounting patterns |
| `french_cleat` | `profile` | 30‚Äì45¬∞ interlocking bevel for gravity-based hanging |
| `standoff_bore` | `thread` | M4/M6/M8 threaded standoff interface |

**Proposed modes**:
- `picture_frame` ‚Äî parametric moulding profile (bevel, scoop, ogee) with configurable rabbet depth/width
- `canvas_floater` ‚Äî L-profile floater frame for gallery-wrapped canvases
- `snap_frame` ‚Äî industrial snap frame with configurable profile width (25mm/32mm) and size
- `seg_lightbox` ‚Äî SEG lightbox frame with edge-lit depth and channel dimensions
- `coin_capsule` ‚Äî direct-fit or ring-fit coin capsule with configurable bore diameter
- `card_slab` ‚Äî parametric trading card display slab (configurable to PSA/BGS/CGC dimensions)
- `badge_holder` ‚Äî CR80 badge holder with slot punch and lanyard attachment point

**Domain**: `culture` (archival, collectibles, display infrastructure)

**License**: CERN-OHL-S-2.0 (consistent with `microscope-slide-holder`)

**Prerequisites before starting**:
1. P0.1 ‚Äî E2E tests in CI ‚úÖ
2. P0.2 ‚Äî Stub projects resolved ‚úÖ
3. P1.1 ‚Äî Project gallery complete ‚úÖ
4. P1.5 ‚Äî Hyperobjects Phase 2 UI live ‚úÖ (so CDG interfaces are surfaced in the platform)

---

## Priority Matrix

| Item | Priority | Impact | Effort | Status |
|------|----------|--------|--------|--------|
| E2E tests in CI | **P0** | High | Small | ‚úÖ Done |
| Resolve stub projects | **P0** | Medium | Small | ‚úÖ Done |
| Complete project gallery | **P1** | High | Medium | ‚úÖ Done |
| Per-project documentation | **P1** | Medium | Medium | ‚úÖ Done |
| WASM fallback testing | **P1** | Medium | Small | ‚úÖ Done |
| Rate limiter ‚Üí Redis | **P1** | Medium | Medium | ‚úÖ Done |
| Hyperobjects Phase 2 UI | **P1** | High | Medium | ‚úÖ Done |
| Storefront Mode | Phase 3 | High | Large | üóìÔ∏è Planned |
| Auto-Assembly (BOSL2) | Phase 3 | Medium | Medium | üóìÔ∏è Planned |
| NopSCADlib Catalog Widget | Phase 3 | Medium | Medium | üóìÔ∏è Planned |
| MCAD ‚Üí BOSL2 Gears | Phase 3 | Low | Small | üóìÔ∏è Planned |
| Hyperobjects Rollout (Phase 3) | Phase 3 | High | Medium | üóìÔ∏è Planned |
| **`framing-hyperobject` project** | **Phase 4** | High | Large | üî¨ Research done |
