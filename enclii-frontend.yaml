name: qubic-frontend
type: web

build:
  dockerfile: web_interface/frontend/Dockerfile
  context: web_interface/frontend
  args:
    - key: VITE_API_BASE
      value: "https://api.qubic.quest"
    - key: VITE_JANUA_BASE_URL
      secret: janua_base_url
    - key: VITE_JANUA_CLIENT_ID
      secret: janua_client_id
    - key: VITE_JANUA_REDIRECT_URI
      value: "https://qubic.quest"

deploy:
  replicas: 2
  resources:
    memory:
      min: 128Mi
      max: 256Mi

service:
  port: 80
  healthCheck:
    path: /
    intervalSeconds: 30
    timeoutSeconds: 5

domains:
  - domain: qubic.quest
    tls:
      provider: cloudflare

autoDeploy:
  branch: main
