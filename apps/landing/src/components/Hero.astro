---
import type { Translations } from '../lib/i18n';

interface Props {
  lang?: string;
  t?: Translations;
}

const { lang = 'es', t } = Astro.props;
const studioUrl = import.meta.env.PROD ? 'https://4d-app.madfam.io' : 'http://localhost:5173';
---

<section class="relative flex min-h-[90vh] flex-col items-center justify-center px-6 pt-16">
  <div class="absolute inset-0 -z-10 bg-gradient-to-b from-background via-background to-secondary/20" />
  <div class="mx-auto max-w-4xl text-center">
    <h1 class="text-4xl font-bold tracking-tight sm:text-6xl lg:text-7xl">
      {t?.hero.titleLine1 ?? 'Tus Diseños.'}<br />
      <span class="text-primary">{t?.hero.titleLine2 ?? 'Sus Dimensiones.'}</span>
    </h1>
    <p class="mx-auto mt-6 max-w-2xl text-lg text-muted-foreground sm:text-xl">
      {t?.hero.subtitle ?? 'Makers: personaliza cualquier parámetro y exporta tu STL perfecto. Creadores: convierte tus modelos OpenSCAD en configuradores que cualquiera puede usar.'}
    </p>

    <div class="mt-8 flex flex-wrap items-center justify-center gap-4">
      <a
        href="#gallery"
        class="rounded-md bg-primary px-6 py-3 text-sm font-medium text-primary-foreground transition-colors hover:bg-primary/90"
      >
        {t?.hero.ctaPrimary ?? 'Explorar 20 Proyectos'}
      </a>
      <a
        href={studioUrl}
        class="rounded-md border border-border px-6 py-3 text-sm font-medium text-foreground transition-colors hover:bg-accent"
      >
        {t?.hero.ctaSecondary ?? 'Sube Tu Diseño'}
      </a>
    </div>
  </div>

  <div class="relative mt-16 w-full max-w-4xl overflow-hidden rounded-xl border border-border bg-card shadow-2xl">
    <div id="hero-preview-container" class="aspect-video w-full">
      <img
        id="hero-static"
        src="/hero-preview.webp"
        srcset="/hero-preview-640w.webp 640w, /hero-preview.webp 1280w"
        sizes="(max-width: 640px) 640px, 1280px"
        alt="Yantra4D Studio — parametric 3D design interface"
        class="h-full w-full object-cover"
        width="1280"
        height="720"
        decoding="async"
        loading="lazy"
      />
      <button
        id="hero-play-btn"
        class="absolute inset-0 flex items-center justify-center bg-black/30 text-white transition-opacity hover:bg-black/40"
        aria-label="Scroll to interactive demo"
      >
        <span class="rounded-full bg-primary/90 px-6 py-3 text-sm font-medium backdrop-blur-sm">
          ▶
        </span>
      </button>
    </div>
  </div>
</section>

<script>
  const btn = document.getElementById('hero-play-btn');
  if (btn) {
    btn.addEventListener('click', () => {
      document.getElementById('demo')?.scrollIntoView({ behavior: 'smooth' });
    });
  }
</script>
